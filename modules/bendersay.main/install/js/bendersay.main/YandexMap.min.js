function init(e,t){var t=t||"",e=e||"",o={};if(""==t){var n=ymaps.geolocation,r=new ymaps.Map("map_"+e,{center:[55,34],zoom:10,controls:["zoomControl","typeSelector","fullscreenControl"]},{searchControlProvider:"yandex#search"});n.get({provider:"auto",mapStateAutoApply:!0}).then(function(t){t.geoObjects.options.set({preset:"islands#orangeDotIcon",draggable:!0}),t.geoObjects.events.add(["dragend"],function(t){var o=r.converter.pageToGlobal(t.get("position")),n=r.getGlobalPixelCenter(),a=r.container.getSize(),i=[a[0]/2,a[1]/2],s=(n[0],n[1],n[0],n[1],r.options.get("projection").fromGlobalPixels(o,r.getZoom()));$("#coords_"+e).val(s.join(","))}),t.geoObjects.get(0).properties.set("hintContent",$(".YANDEX_Point_hover").attr("YANDEX_Point_hover")),o.ID=t.geoObjects.get(0),r.geoObjects.add(t.geoObjects)})}else{var a=t.split(",");r=new ymaps.Map("map_"+e,{center:[a[0],a[1]],zoom:10,controls:["zoomControl","typeSelector","fullscreenControl"]}),o.ID=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[a[0],a[1]]},properties:{hintContent:$(".YANDEX_Point_hover").attr("YANDEX_Point_hover")}},{preset:"islands#orangeDotIcon",draggable:!0}),o.ID.events.add("dragend",function(t){var o=r.converter.pageToGlobal(t.get("position")),n=r.getGlobalPixelCenter(),a=r.container.getSize(),i=[a[0]/2,a[1]/2],s=(n[0],n[1],n[0],n[1],r.options.get("projection").fromGlobalPixels(o,r.getZoom()));$("#coords_"+e).val(s.join(","))}),r.geoObjects.add(o.ID)}r.events.add("click",function(t){var n=r.converter.pageToGlobal(t.get("position")),a=r.getGlobalPixelCenter(),i=r.container.getSize(),s=[i[0]/2,i[1]/2],l=(a[0],a[1],a[0],a[1],r.options.get("projection").fromGlobalPixels(n,r.getZoom())),c=l.join(",");$("#coords_"+e).val(c),o.ID.geometry.setCoordinates([l[0],l[1]])})}$(function(){$(".BendersayAddMap").click(function(){var e=parseInt($(this).attr("key_i"))+1;$(this).attr("key_i",e);var t='<div id="map_'+$(this).attr("key_name")+"_"+e+'" style="width: 500px; height: 400px"></div>';t+=$(this).prev("p")[0].outerHTML;var o=$(this).attr("key_name")+"[]",n="coords_"+$(this).attr("key_name")+"_"+e;$(this).closest("tr").after('<tr><td></td><td class="BendersayMap">'+t+"</td></td>").next().find("td.BendersayMap").append($(this)).children("p").children("input").attr("value","").attr("name",o).attr("id",n),init($(this).attr("key_name")+"_"+e)})});